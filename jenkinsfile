pipeline {
    agent any

    stages {
        stage(scm){
            steps{
                git 'https://github.com/sriison/spring-petclinic.git'
            }
        }

        stage('Testing') {
            steps {
                echo 'Hi Welcome to Pipeline Job Example'
                echo "the job name is ${env.JOB_NAME}"
                echo "the build number is ${env.BUILD_NUMBER}"
                echo "The node name is ${env.NODE_NAME}"
            }
        }
        
        stage('Deploy') {
            steps {
                echo 'Hi Welcome to Pipeline Job Example'
                echo "the job name is ${env.JOB_NAME}"
                echo "the build number is ${env.BUILD_NUMBER}"
                echo "The node name is ${env.NODE_NAME}"
            }
        }
        stage(imagebuild){
            steps{
                sh '''
                sudo docker build -t Rakesh-test .
                '''
            }
        }
    }
    post
    {
        always
        {
            emailext body: 'Build started on echo $date', subject: 'Build started on echo $date', to: 'gamidirakhi@gmail.com'
        }
    }
}
